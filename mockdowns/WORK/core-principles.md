# Agent 작업 핵심 원칙 (Core Principles)

## 📋 개요

이 문서는 Cursor Auto Agent가 작업을 수행할 때 반드시 지켜야 할 핵심 원칙입니다.
**모든 작업은 이 4가지 원칙을 최우선으로 합니다.**

---

## 🎯 핵심 원칙 (Core Principles)

### 1. 안정성 (Stability) ⭐⭐⭐

**목표**: 작업이 안전하게 진행되어야 함

#### 원칙

- **기능 보존**: 기존 기능이 절대 깨지지 않아야 함
- **점진적 변경**: 한 번에 모든 것을 변경하지 않음
- **검증 필수**: 각 변경 후 반드시 검증
- **롤백 가능**: 문제 발생 시 즉시 이전 상태로 복구 가능

#### 실천 방법

- 각 Step 완료 후 기능 회귀 테스트
- 작은 단위로 작업하고 즉시 검증
- Git 커밋을 통한 롤백 가능 상태 유지
- `mockdowns/RULES/refactoring-safety-guide.md` 준수

---

### 2. 속도 (Speed) ⚡

**목표**: 빠른 작업 수행

#### 원칙

- **불필요한 작업 최소화**: 필요한 작업만 수행
- **빠른 검증 우선**: 타입 체크 → Lint → 빌드 순서
- **pnpm 명령어 최소화**: 타입 체크만 필요한 경우 pnpm 불필요
- **병렬 작업 방지**: 한 번에 하나의 작업만 수행

#### 실천 방법

- 타입 체크만 필요한 경우: `tsc --noEmit` (Agent 직접 실행)
- 빌드는 최소한으로: Phase 완료 시에만 실행
- 불필요한 파일 생성 방지
- `mockdowns/RULES/performance-optimization-guide.md` 준수

---

### 3. 정확성 (Accuracy) 🎯

**목표**: 왜곡되지 않는 작업, 의도대로 정확한 작업

#### 원칙

- **의도 명확**: 각 작업의 목적과 이유를 명확히
- **타입 안정성**: 모든 코드는 타입 안전하게 작성
- **FSD 원칙 준수**: 레이어별 역할과 의존성 방향 준수
- **명확한 네이밍**: 변수명과 함수명은 의도를 명확히 표현

#### 실천 방법

- 타입 정의를 먼저 작성하고 적용
- FSD 구조 규칙 준수 (`mockdowns/RULES/coding-rules.md`)
- 명확한 함수 시그니처와 주석
- 검증을 통한 정확성 확인

---

### 4. 최소한의 작업 (Minimal Work) 🔧

**목표**: 불필요한 작업 최소화

#### 원칙

- **필요한 작업만**: 각 Step에서 정말 필요한 작업만 수행
- **중복 방지**: 이미 완료된 작업은 반복하지 않음
- **효율적 검증**: 가장 빠른 방법으로 검증
- **불필요한 파일 생성 방지**: 필요한 파일만 생성

#### 실천 방법

- 타입 체크만으로 충분하면 빌드 실행하지 않음
- package.json 변경이 없으면 `pnpm install` 불필요
- 이미 생성된 파일은 재생성하지 않음
- 검증은 최소한으로, 하지만 필수는 반드시 수행

---

## 🔄 원칙 간 우선순위

### 충돌 시 우선순위

1. **안정성** (최우선)
   - 기능이 깨질 위험이 있으면 속도를 희생
   - 안전한 방법을 선택

2. **정확성**
   - 빠르지만 부정확한 작업보다는 느리지만 정확한 작업
   - 타입 안정성은 절대 포기하지 않음

3. **속도**
   - 안정성과 정확성을 해치지 않는 범위에서 최적화
   - 불필요한 작업 제거

4. **최소한의 작업**
   - 위 3가지 원칙을 해치지 않는 범위에서 최소화

---

## 📋 작업 전 체크리스트

### 각 작업 시작 전 확인

- [ ] **안정성**: 이 작업이 기존 기능을 깨뜨리지 않는가?
- [ ] **속도**: 더 빠른 방법이 있는가?
- [ ] **정확성**: 작업 목적이 명확한가? 타입이 올바른가?
- [ ] **최소한의 작업**: 정말 필요한 작업인가? 불필요한 부분은 없는가?

---

## 🎯 Step별 원칙 적용

### Phase 1-2: 기초 작업

**안정성**: ✅ 새 파일만 생성, 기존 코드 변경 없음
**속도**: ✅ 타입 체크만 사용 (`tsc --noEmit`)
**정확성**: ✅ 타입 정의를 먼저 작성
**최소한의 작업**: ✅ 필요한 타입만 정의

---

### Phase 3-4: Features/Widgets 생성

**안정성**: ✅ 새 기능 추가, 기존 코드 변경 없음
**속도**: ✅ 타입 체크만 사용
**정확성**: ✅ FSD 구조 준수
**최소한의 작업**: ✅ 필요한 파일만 생성

---

### Phase 5: Shared 정리

**안정성**: ⚠️ 파일 이동 - 검증 필수
**속도**: ⚠️ 빌드 확인 필요 (하지만 타입 체크 먼저)
**정확성**: ✅ Import 경로 정확히 업데이트
**최소한의 작업**: ✅ 한 번에 하나의 파일만 이동

---

### Phase 6: Pages 리팩토링

**안정성**: 🔴 매우 중요 - 기능 회귀 테스트 필수
**속도**: ⚠️ 단계별 검증으로 안전하게 진행
**정확성**: ✅ 기존 기능과 동일하게 동작해야 함
**최소한의 작업**: ✅ 하나씩 교체하고 검증

---

### Phase 7: 최종 검증

**안정성**: ✅ 모든 기능 정상 동작 확인
**속도**: ⚠️ 최종 검증이므로 모든 검증 수행
**정확성**: ✅ 체크리스트 모두 확인
**최소한의 작업**: ✅ 필수 검증만 수행

---

## 🚨 원칙 위반 사례

### ❌ 안정성 위반

```typescript
// ❌ 나쁜 예: 한 번에 모든 것을 변경
// PostsManagerPage의 모든 로직을 한 번에 변경
// → 기능이 깨질 위험 높음

// ✅ 좋은 예: 하나씩 교체
// fetchPosts만 먼저 변경 → 검증 → 다음 작업
```

### ❌ 속도 저하

```bash
# ❌ 나쁜 예: 불필요한 빌드 실행
# 타입 체크만 필요한데 빌드까지 실행
tsc --noEmit
pnpm run build  # 불필요!

# ✅ 좋은 예: 타입 체크만
tsc --noEmit  # 충분함
```

### ❌ 정확성 저하

```typescript
// ❌ 나쁜 예: 타입 없이 작업
const data = await response.json() // any

// ✅ 좋은 예: 타입 명시
const data: PostsResponse = await response.json()
```

### ❌ 불필요한 작업

```bash
# ❌ 나쁜 예: package.json 변경 없는데 설치
pnpm install  # 불필요!

# ✅ 좋은 예: 타입 체크만
tsc --noEmit
```

---

## ✅ 원칙 준수 체크리스트

### 각 Step 완료 후 확인

- [ ] **안정성**: 기존 기능이 정상 동작하는가?
- [ ] **속도**: 불필요한 작업을 하지 않았는가?
- [ ] **정확성**: 작업이 의도대로 정확히 수행되었는가?
- [ ] **최소한의 작업**: 필요한 작업만 수행했는가?

---

## 📚 관련 문서

- `mockdowns/RULES/refactoring-safety-guide.md`: 안정성 가이드
- `mockdowns/RULES/performance-optimization-guide.md`: 속도 최적화 가이드
- `mockdowns/RULES/coding-rules.md`: 정확성 (타입, FSD 구조)
- `mockdowns/RULES/pnpm-workflow-guide.md`: 최소한의 작업 (불필요한 pnpm 방지)

---

## 🎯 핵심 메시지

**모든 작업은 다음 4가지를 최우선으로 합니다:**

1. ⭐⭐⭐ **안정성**: 기능이 깨지지 않아야 함
2. ⚡ **속도**: 빠르게 작업
3. 🎯 **정확성**: 의도대로 정확한 작업
4. 🔧 **최소한의 작업**: 불필요한 작업 최소화

**이 원칙들을 지키면 안전하고 빠르고 정확하며 효율적인 작업이 가능합니다! 🚀**

